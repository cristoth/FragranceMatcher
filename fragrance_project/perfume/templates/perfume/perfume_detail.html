{% extends "perfume/base.html" %}
{% load static %}

{% block css %}
<link rel="stylesheet" type="text/css" href="{% static 'perfume/css/perfume_detail.css' %}">
{% endblock %}

{% block content %}
<article class="content-section">
    <div id="to_pdf">
        <div class="perfume-metadata d-flex">
            <img class="rounded-circle perfume-img" src="{{ rec.author.profile.image.url }}"
                alt="{{ rec.author.username }}'s profile picture">
            <p class="pe-3 pb-3 pt-3 author">{{ rec.author }}</p>
            <small class="ms-auto p-3 text-muted ">{{ rec.date_posted|date:"F d, Y" }}</small>
        </div>

        <!-- Perfume Item Heading -->
        <h1 class="mt-4 mb-1">{{ rec.name }}</h1>

        <!-- Perfume Item Row -->
        <div class="row align-items-center mt-4">
            <div class="col-md-6">
                <img class="img-fluid rounded" src="{{ rec.image.url }}" alt="Perfume image">
            </div>

            <div class="col-md-6">
                <div class="info-box">
                    <h3>Fragrances:</h3>
                    <ul>
                        {% for ingr in rec.perfume_fragrance_set.all %}
                        <li>{{ ingr.fragrance.name }}: {{ ingr.quantity }} {% if ingr.unit %} {{ ingr.unit }} {% endif %}</li>
                        {% endfor %}
                    </ul>
                </div>
                <!-- <div class="info-box">
                    <p class="pt-3"><b>Allergens:</b>
                        {% for ingr in rec.fragrances.all %}
                        {{ ingr }}
                        {% empty %}
                        No allergens.
                        {% endfor %}
                    </p>
                </div> -->
            </div>
        </div>

        <div class="info-box">
            <h3>Perfume description:</h3>
            <p>{{ rec.description }}</p>
        </div>
    </div>
    
    <div class="d-flex">
        {% if rec.author == user %}
        <a class="btn btn-secondary btn-sm mt-1 mb-1 me-1 ms-auto"
            href="{% url 'perfume-update' rec.id %}">Update</a>
        <a class="btn btn-danger btn-sm mt-1 mb-1" href="{% url 'perfume-delete' rec.id %}">Delete</a>
        {% endif %}
    </div>
</article>

{% endblock content %}

{% block custom_js %}
<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.4.1/html2canvas.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.3.4/jspdf.debug.js"></script>
{% endblock %}